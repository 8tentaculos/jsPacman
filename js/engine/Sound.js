let audioCtx,gainNode;const decodeAudioData=e=>new Promise((t,i)=>{audioCtx.decodeAudioData(e,t,i)});class Sound{constructor(e){if(!audioCtx){const e=window.AudioContext||window.webkitAudioContext;audioCtx=new e,gainNode=audioCtx.createGain(),gainNode.connect(audioCtx.destination)}this.url=e}load(){fetch(this.url).then(e=>e.arrayBuffer()).then(e=>decodeAudioData(e)).then(e=>(this.audioBuffer=e,Promise.resolve(e)))}play(){"suspended"===audioCtx.state&&audioCtx.resume();const e=audioCtx.createBufferSource();e.buffer=this.audioBuffer,e.connect(gainNode),e.start()}mute(e){this.muted=!1!==e,this.muted?gainNode.gain.setValueAtTime(0,audioCtx.currentTime):gainNode.gain.setValueAtTime(1,audioCtx.currentTime)}isReady(){return!!this.audioBuffer}}export default Sound;